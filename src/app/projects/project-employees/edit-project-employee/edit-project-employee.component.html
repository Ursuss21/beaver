<div class="project-employee">
  <div class="header">
    <div class="name">
      <img [src]="projectEmployee.employee.image" class="picture" />
      <h4>
        {{ projectEmployee.employee.firstName }}
        {{ projectEmployee.employee.lastName }}
      </h4>
    </div>
    <bvr-button
      (click)="openArchiveModal()"
      icon="archive"
      styleClass="button-icon"></bvr-button>
  </div>
  <div class="form">
    <bvr-form-field class="disabled field" label="Email">
      <input
        disabled
        [(ngModel)]="projectEmployee.employee.email"
        type="text" />
    </bvr-form-field>
    <div class="employment-info">
      <bvr-form-field class="disabled left-field" label="Position">
        <input
          disabled
          [(ngModel)]="projectEmployee.employee.position"
          type="text" />
      </bvr-form-field>
      <bvr-form-field class="disabled left-field" label="Hire Date">
        <input
          disabled
          [(ngModel)]="projectEmployee.employee.employmentDate"
          type="text" />
      </bvr-form-field>
      <bvr-form-field class="disabled field" label="Project Join Date">
        <input disabled [(ngModel)]="projectEmployee.joinDate" type="text" />
      </bvr-form-field>
    </div>
    <div *ngIf="editProjectEmployeeForm" [formGroup]="editProjectEmployeeForm">
      <bvr-form-field
        class="contract-info"
        label="Contract Type"
        [required]="isRequired('contractType')">
        <bvr-dropdown-list
          formControlName="contractType"
          name="contract type"
          [options]="contractTypes">
        </bvr-dropdown-list>
        <ng-container *ngIf="showErrors('contractType')">
          <small
            *ngIf="
              editProjectEmployeeForm.get('contractType')?.hasError('required')
            "
            >This field is required.</small
          >
        </ng-container>
      </bvr-form-field>
      <div class="financial-info">
        <bvr-form-field
          class="left-field"
          label="Working Time"
          [required]="isRequired('workingTime')">
          <input formControlName="workingTime" type="number" />
          <ng-container *ngIf="showErrors('workingTime')">
            <small
              *ngIf="
                editProjectEmployeeForm.get('workingTime')?.hasError('required')
              "
              >This field is required.</small
            >
          </ng-container>
        </bvr-form-field>
        <bvr-form-field
          class="field"
          label="Wage"
          [required]="isRequired('wage')">
          <input formControlName="wage" type="number" />
          <ng-container *ngIf="showErrors('wage')">
            <small
              *ngIf="editProjectEmployeeForm.get('wage')?.hasError('required')"
              >This field is required.</small
            >
          </ng-container>
        </bvr-form-field>
      </div>
    </div>
  </div>
  <div class="form-buttons">
    <bvr-button
      class="form-button"
      (click)="openCancelModal()"
      label="Cancel"
      styleClass="button-text"></bvr-button>
    <bvr-button (click)="openSaveModal()" label="Save"></bvr-button>
  </div>
</div>
<bvr-modal
  (confirm)="archive()"
  confirmLabel="archive"
  [description]="modalDescription"
  [title]="'Archive employee'"
  [(visible)]="isArchiveModalOpen"></bvr-modal>
<bvr-modal
  (confirm)="cancel()"
  confirmLabel="Leave"
  [description]="modalDescription"
  [title]="'Leave'"
  [(visible)]="isCancelModalOpen"></bvr-modal>
<bvr-modal
  (confirm)="save()"
  confirmLabel="Save"
  [description]="modalDescription"
  [title]="'Save changes'"
  [(visible)]="isSaveModalOpen"></bvr-modal>

<bvr-toast></bvr-toast>
